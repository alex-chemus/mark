"use strict";(self["webpackChunkmark"]=self["webpackChunkmark"]||[]).push([[707],{707:function(t,e,a){a.r(e),a.d(e,{default:function(){return F}});var r=a(252),s=a(262),n=a(577),o=a(562),u=a(201),l=a(53),i=a(907),d=a(933),c=a(235);const p=({route:t})=>{const e=(0,s.iH)(null),a=async()=>{const{response:a,error:r}=await(0,c.ib)({path:"markMethods/attendance.getAttendanceReportsInfo",data:{reportsIDs:t.params.reportID}}),{setTime:s}=(0,l.rE)();r?(console.log(r),d.h.dispatch("setError",r)):e.value=s(a[0])};return{report:e,fetchReport:a}};var h=p;const v=t=>((0,r.dD)("data-v-360d42b4"),t=t(),(0,r.Cn)(),t),f=o+"#tabler-arrow-left",k=o+"#tabler-edit",g={key:0,class:"nav"},S={class:"title-group"},_=v((()=>(0,r._)("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},[(0,r._)("use",{href:f})],-1))),w=[_],m={class:"heading"},b={class:"desktop-filter"},D=v((()=>(0,r._)("span",null,"Редактировать",-1))),U=v((()=>(0,r._)("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},[(0,r._)("use",{href:k})],-1))),I=[D,U],y={key:1,class:"main"},C={class:"mobile-controls"},H=v((()=>(0,r._)("span",null,"Редактировать",-1))),R=v((()=>(0,r._)("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},[(0,r._)("use",{href:k})],-1))),q=[H,R];var x=(0,r.aZ)({__name:"Report",setup(t){const e=(0,u.yj)(),a=(0,u.tv)(),o=(0,r.f3)("key"),{getters:d,state:c}=(0,i.oR)(o),{report:p,fetchReport:v}=h({route:e});(0,r.bv)(v),(0,r.YP)((()=>e.params.reportID),v);const f=(0,s.iH)(null);(0,r.YP)([p,()=>c.groups],(()=>{p.value&&(f.value=d.getGroups(p.value.groupID))}));const k=(0,s.iH)("all"),_=t=>{if(f.value&&"string"!==typeof t)return f.value.headStudentID===t?"Староста":f.value.deputyHeadStudentID===t?"Зам. старосты":void 0},D=(0,r.Fl)((()=>{if(!c.userInfo||!f.value)return!1;const t=d.roles.includes("teacher"),e=d.roles.includes("administrator_of_institution"),a=c.userInfo.id===f.value.headStudentID,r=c.userInfo.id===f.value.deputyHeadStudentID;return t||e||a||r}));return(0,r.wF)((()=>document.title="Отчет посещаемости")),(t,o)=>((0,r.wg)(),(0,r.iD)(r.HY,null,[(0,s.SU)(p)?((0,r.wg)(),(0,r.iD)("nav",g,[(0,r._)("div",S,[(0,s.SU)(a).options.history.state.back?((0,r.wg)(),(0,r.iD)("button",{key:0,class:"back-button",onClick:o[0]||(o[0]=t=>(0,s.SU)(a).go(-1))},w)):(0,r.kq)("",!0),(0,r._)("h1",m,[(0,r._)("span",null,(0,n.zw)((0,s.SU)(p).date),1),(0,r._)("span",null,(0,n.zw)((0,s.SU)(p).groupName),1),(0,r._)("span",null,(0,n.zw)((0,s.SU)(p).institutionData.shortName),1)])]),(0,r._)("div",b,[(0,s.SU)(D)?((0,r.wg)(),(0,r.iD)("button",{key:0,class:"edit-button",onClick:o[1]||(o[1]=t=>(0,s.SU)(a).push({path:`/edit-report/${(0,s.SU)(e).params.reportID}`}))},I)):(0,r.kq)("",!0),(0,r.Wm)((0,s.SU)(l.LV),{filter:k.value,onSwitch:o[2]||(o[2]=t=>k.value=t)},null,8,["filter"])])])):(0,r.kq)("",!0),(0,s.SU)(p)?((0,r.wg)(),(0,r.iD)("main",y,[(0,r._)("div",C,[(0,r._)("button",{class:"edit-button",onClick:o[3]||(o[3]=t=>(0,s.SU)(a).push({path:`/edit-report/${(0,s.SU)(e).params.reportID}`}))},q),(0,r.Wm)((0,s.SU)(l.LV),{filter:k.value,onSwitch:o[4]||(o[4]=t=>k.value=t)},null,8,["filter"])]),(0,r.Wm)((0,s.SU)(l.rF),{"users-data":(0,s.SU)(p).students,filter:k.value,"check-status":_},null,8,["users-data","filter"])])):(0,r.kq)("",!0)],64))}}),z=a(744);const B=(0,z.Z)(x,[["__scopeId","data-v-360d42b4"]]);var F=B}}]);
//# sourceMappingURL=707.cff7002b.js.map