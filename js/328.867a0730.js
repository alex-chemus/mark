"use strict";(self["webpackChunkmark"]=self["webpackChunkmark"]||[]).push([[328],{328:function(t,n,o){o.r(n),o.d(n,{default:function(){return g}});var a=o(252),i=o(577),e=o(262),s=o(201),r=o(235),u=o(907),l=o(933);const c=()=>{const t=(0,e.iH)(null),n=async({invitationID:n})=>{const{response:o,error:a}=await(0,r.ib)({path:"markMethods/group.getInvitationInfo",data:{invitationID:n}});a?(l.h.dispatch("setError",a),console.log(a)):t.value=o};return{invitationInfo:t,getInvitationInfo:n}};var p=c;const d={key:0,class:"invitation"},v={class:"title"};var I=(0,a.aZ)({__name:"Invitation",setup(t){const n=(0,a.f3)("key"),{dispatch:o,getters:l,state:c}=(0,u.oR)(n),{params:I}=(0,s.yj)(),f=(0,s.tv)();(0,a.wF)((()=>document.title="Войти в группу")),(0,a.wF)((()=>{(""===I.id||l.roles?.includes("administrator_of_institution"))&&f.push("/notfound")}));const{invitationInfo:h,getInvitationInfo:g}=p();(0,a.bv)((()=>{"string"===typeof I.id?g({invitationID:I.id}):g({invitationID:I.id[0]})}));const D=(0,e.iH)(null),k=async()=>{if(h.value&&c.userInfo&&c.userInfo.additionalData.inGroups.includes(h.value.groupID)&&!l.roles.includes("teacher"))return void f.push({path:"/"});if(h.value&&c.userInfo&&(c.userInfo.additionalData.inGroups.includes(h.value.groupID)||c.userInfo.additionalData.ownGroups.includes(h.value.groupID)))return void f.push({path:`/groupID/${h.value.groupID}`});if(!h.value)return;const{response:t,error:n}=await(0,r.ib)({path:"markMethods/group.getInfo",data:{groupsIDs:h.value.groupID}});n?(o("setError",n),console.log(n)):D.value=t[0]};(0,a.YP)([h,()=>c.userInfo],k);const w=async()=>{const{error:t}=await(0,r.ib)({path:"markMethods/group.join",data:{invitationID:I.id}});t?(o("setError",t),console.log(t)):(await o("fetchUserInfo"),await o("fetchInstituion"),await o("useGroups"),f.push({path:"/"}))};return(t,n)=>D.value?((0,a.wg)(),(0,a.iD)("section",d,[(0,a._)("h6",v,"Вступить в группу "+(0,i.zw)(D.value.groupName)+"?",1),(0,a._)("button",{class:"button",onClick:w},"Вступить")])):(0,a.kq)("",!0)}}),f=o(744);const h=(0,f.Z)(I,[["__scopeId","data-v-7ce0d102"]]);var g=h}}]);
//# sourceMappingURL=328.867a0730.js.map