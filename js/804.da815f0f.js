"use strict";(self["webpackChunkmark"]=self["webpackChunkmark"]||[]).push([[804],{804:function(e,l,o){o.r(l),o.d(l,{default:function(){return _}});var r=o(252),s=o(262),a=o(577),n=o(907),t=o(201),i=o(214),u=o(235),d=o(933);const f=()=>{const e=(0,s.iH)(null),l=(0,s.iH)(null),o=async({folderID:o,groupID:r})=>{const{response:s,error:a}=await(0,u.ib)({path:"markMethods/groupCloud.getFiles",data:o?{groupID:r,folderID:o}:{groupID:r}});if(a)d.h.dispatch("setError",a),console.log(a);else{l.value=s.folderName;const o={folders:[],files:[]};Object.entries(s.content).forEach((e=>{e[0].startsWith("folder_")?o.folders.push({folderID:e[0].slice(7),folderName:e[1].folderName}):o.files.push({...e[1],fileID:e[0].slice(5)})})),e.value=o}};return{folderInfo:e,folderName:l,fetchFolderInfo:o}};var c=f;const g={class:"cloud-page"},p={class:"content-grid"},D={key:0,class:"separator"},I={key:1,class:"content-grid --margin"},m={key:1,class:"no-groups"},v={key:1,class:"no-groups"},h={key:2,class:"no-groups"},k={key:3,class:"no-groups"};var S=(0,r.aZ)({__name:"OurCloud",setup(e){const l=(0,t.yj)(),o=(0,r.f3)("key"),{getters:d,state:f}=(0,n.oR)(o),S=(0,s.iH)(null),U=()=>{l.params.folderID&&"0"!==l.params.folderID?S.value=l.params.folderID:S.value=null};(0,r.bv)(U),(0,r.YP)((()=>l.params.folderID),U);const w=(0,s.iH)(null),_=()=>{""===l.params.groupID?w.value=null:w.value=l.params.groupID};(0,r.bv)(_),(0,r.YP)((()=>l.params.groupID),_);const{folderInfo:y,fetchFolderInfo:b}=c(),H=()=>{w.value&&b({groupID:l.params.groupID,folderID:S.value})};(0,r.bv)(H),(0,r.YP)([w,S],H);const F=(0,r.Fl)((()=>(!d.roles.includes("administrator_of_institution")||0!==f.institution?.groups.length)&&((!d.roles.includes("teacher")||0!==f.userInfo?.additionalData.inGroups.length||0!==f.userInfo?.additionalData.ownGroups.length)&&!(0===f.userInfo?.additionalData.inGroups.length&&!d.roles.includes("administrator_of_institution"))))),N=(0,r.Fl)((()=>d.roles.includes("teacher")||d.roles.includes("administrator_of_institution")));return(0,r.wF)((()=>document.title="Облако группы")),(e,l)=>((0,r.wg)(),(0,r.iD)("main",g,[(0,r.Wm)((0,s.SU)(i.FI)),(0,s.SU)(y)&&w.value&&(0,s.SU)(F)?((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[(0,r._)("section",{class:(0,a.C_)(["cloud-heading",(0,s.SU)(N)?"hide-path":""])},[(0,r.Wm)((0,s.SU)(i.Qn),{groupID:w.value,folderID:S.value},null,8,["groupID","folderID"]),(0,s.SU)(N)?((0,r.wg)(),(0,r.j4)((0,s.SU)(i.lI),{key:0,groupID:w.value,folderID:S.value,onCreated:H},null,8,["groupID","folderID"])):(0,r.kq)("",!0)],2),0!==(0,s.SU)(y).folders.length&&0!==(0,s.SU)(y).folders.length?((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[(0,r._)("section",p,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)((0,s.SU)(y).folders,(e=>((0,r.wg)(),(0,r.j4)((0,s.SU)(i.gt),{key:e.folderName,folder:e,groupID:w.value},null,8,["folder","groupID"])))),128))]),(0,s.SU)(y).folders.length&&(0,s.SU)(y).files.length?((0,r.wg)(),(0,r.iD)("div",D)):(0,r.kq)("",!0),(0,s.SU)(y)?((0,r.wg)(),(0,r.iD)("section",I,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)((0,s.SU)(y).files,(e=>((0,r.wg)(),(0,r.j4)((0,s.SU)(i.$B),{key:e.fileName,file:e},null,8,["file"])))),128))])):(0,r.kq)("",!0)],64)):((0,r.wg)(),(0,r.iD)("div",m," Директория пуста "))],64)):!(0,s.SU)(y)&&w.value&&(0,s.SU)(F)?((0,r.wg)(),(0,r.iD)("div",v,[(0,r.Wm)((0,s.SU)(u.aN))])):(0,s.SU)(d).roles.includes("administrator_of_institution")&&!(0,s.SU)(F)?((0,r.wg)(),(0,r.iD)("div",h," Группы еще не созданы ")):(0,s.SU)(F)?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",k," Вы не состоите ни в одной группе "))]))}}),U=o(744);const w=(0,U.Z)(S,[["__scopeId","data-v-08927b0c"]]);var _=w}}]);
//# sourceMappingURL=804.da815f0f.js.map